"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[516],{1797:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/project-structure-b4a95fdd27c535033ca1c2a4acdf1235.png"},876:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>d});var r=a(2784);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=r.createContext({}),p=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},h=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,i=e.mdxType,n=e.originalType,l=e.parentName,h=o(e,["components","mdxType","originalType","parentName"]),u=p(a),m=i,d=u["".concat(l,".").concat(m)]||u[m]||c[m]||n;return a?r.createElement(d,s(s({ref:t},h),{},{components:a})):r.createElement(d,s({ref:t},h))}));function d(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var n=a.length,s=new Array(n);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:i,s[1]=o;for(var p=2;p<n;p++)s[p]=a[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},8260:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>n,metadata:()=>o,toc:()=>p});var r=a(7896),i=(a(2784),a(876));const n={sidebar_position:2},s="Project Structure",o={unversionedId:"project-structure",id:"project-structure",title:"Project Structure",description:"The project was created using the Nx monorepo tool. The project is organized into apps, services, and libraries. Nx is a tool that helps you develop full-stack applications using a monorepo. Nx helps you develop applications using a component-driven approach. Nx also helps you develop applications using a microservices architecture.",source:"@site/docs/project-structure.md",sourceDirName:".",slug:"/project-structure",permalink:"/project-structure",draft:!1,editUrl:"https://github.com/marleypowell/goalie/tree/main/apps/website/docs/project-structure.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Introduction",permalink:"/"},next:{title:"Features",permalink:"/category/features"}},l={},p=[{value:"Apps",id:"apps",level:2},{value:"Frontend",id:"frontend",level:3},{value:"Website",id:"website",level:3},{value:"Services",id:"services",level:2},{value:"API Gateway",id:"api-gateway",level:3},{value:"Goals Service",id:"goals-service",level:3},{value:"OAuth Agent Service",id:"oauth-agent-service",level:3},{value:"Users Service",id:"users-service",level:3},{value:"Curity Identity Server (3rd Party)",id:"curity-identity-server-3rd-party",level:3},{value:"Libraries",id:"libraries",level:2},{value:"Common",id:"common",level:3},{value:"API Gateway API Client",id:"api-gateway-api-client",level:3},{value:"OAuth Agent API Client",id:"oauth-agent-api-client",level:3},{value:"Shared Goals",id:"shared-goals",level:3},{value:"UI",id:"ui",level:3}],h={toc:p},u="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(u,(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"project-structure"},"Project Structure"),(0,i.kt)("p",null,"The project was created using the ",(0,i.kt)("a",{parentName:"p",href:"https://nx.dev/"},"Nx")," monorepo tool. The project is organized into apps, services, and libraries. Nx is a tool that helps you develop full-stack applications using a monorepo. Nx helps you develop applications using a component-driven approach. Nx also helps you develop applications using a microservices architecture."),(0,i.kt)("p",null,"The frontend apps are built using ",(0,i.kt)("a",{parentName:"p",href:"https://angular.io/"},"Angular"),". The backend microservices are built using ",(0,i.kt)("a",{parentName:"p",href:"https://nestjs.com/"},"NestJS"),". The project is organized as follows:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Project Structure",src:a(1797).Z,width:"4252",height:"787"})),(0,i.kt)("h2",{id:"apps"},"Apps"),(0,i.kt)("h3",{id:"frontend"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/apps/frontend"},"Frontend")),(0,i.kt)("p",null,"The frontend is an Angular single page application (SPA) that is built using the Angular CLI. The frontend is responsible for the UI and user interaction. The frontend communicates with the ",(0,i.kt)("a",{parentName:"p",href:"#api-gateway"},"API Gateway")," to retrieve data and perform actions. The frontend communicates with the ",(0,i.kt)("a",{parentName:"p",href:"#oauth-agent-service"},"OAuth Agent service")," to perform authentication and authorization."),(0,i.kt)("p",null,"The application follows a component-driven approach where components are grouped by feature. Each component has its own folder that contains the following files:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"component.ts")," - The component class"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"component.html")," - The component template"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"component.scss")," - The component styles"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"component.spec.ts")," - The component unit tests")),(0,i.kt)("p",null,"The components and other code are grouped into the following folders:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"libs/ui/src/lib")," - Contains the components that can used by multiple features"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"apps/frontend/src/app/features")," - Contains the components that are used by a specific feature"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"apps/frontend/src/app/shared")," - Contains the components that are shared across features"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"apps/frontend/src/app/services")," - Contains the services that are used by the application")),(0,i.kt)("p",null,"The application uses the ",(0,i.kt)("a",{parentName:"p",href:"#ui"},"UI")," library for common UI components. The application uses the ",(0,i.kt)("a",{parentName:"p",href:"#api-gateway-api-client"},"API Gateway API Client")," library to communicate with the ",(0,i.kt)("a",{parentName:"p",href:"#api-gateway"},"API Gateway"),". The application uses the ",(0,i.kt)("a",{parentName:"p",href:"#oauth-agent-api-client"},"OAuth Agent API Client")," library to communicate with the ",(0,i.kt)("a",{parentName:"p",href:"#oauth-agent-service"},"OAuth Agent service"),"."),(0,i.kt)("p",null,"The frontend is built using the following technologies:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://angular.io/"},"Angular")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://rxjs.dev/"},"RxJS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://primeng.org/"},"PrimeNG")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://casl.js.org/"},"CASL"))),(0,i.kt)("h3",{id:"website"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/apps/website"},"Website")),(0,i.kt)("p",null,"The website is a static site that is built using ",(0,i.kt)("a",{parentName:"p",href:"https://v2.docusaurus.io/"},"Docusaurus 2"),". The website is used to document the project and provide information about the project."),(0,i.kt)("h2",{id:"services"},"Services"),(0,i.kt)("h3",{id:"api-gateway"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/apps/api-gateway"},"API Gateway")),(0,i.kt)("p",null,"The API Gateway is a ",(0,i.kt)("a",{parentName:"p",href:"https://nestjs.com/"},"NestJS")," application that is responsible for routing requests to the appropriate service. The API Gateway also handles authentication and authorization."),(0,i.kt)("p",null,"The API Gateway communicates with the following services using ",(0,i.kt)("a",{parentName:"p",href:"https://nats.io/"},"NATS"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#goals-service"},"Goals Service")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#users-service"},"Users Service"))),(0,i.kt)("p",null,"NATS is used to communicate between services because it is a lightweight, high-performance, and reliable messaging system. NATS is also used because it is easy to use and it is easy to integrate with other technologies."),(0,i.kt)("p",null,"The API Gateway is built using the following technologies:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nestjs.com/"},"NestJS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://casl.js.org/"},"CASL")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://www.passportjs.org/"},"Passport")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nats.io/"},"NATS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://opentelemetry.io/"},"Open Telemetry"))),(0,i.kt)("h3",{id:"goals-service"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/apps/services/goals-service"},"Goals Service")),(0,i.kt)("p",null,"The Goals Service is a ",(0,i.kt)("a",{parentName:"p",href:"https://nestjs.com/"},"NestJS")," application that is responsible for managing goals. For storing data, the goals services uses ",(0,i.kt)("a",{parentName:"p",href:"https://eventstore.com/"},"Eventstore"),". Eventstore is an open-source state-transition database that is optimized for storing events. The goals service uses Eventstore to store events that represent changes to goals, this pattern is known as ",(0,i.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/architecture/patterns/event-sourcing"},"Event Sourcing"),". The goals service uses ",(0,i.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/architecture/patterns/cqrs"},"CQRS")," to read and write data. The goals service uses ",(0,i.kt)("a",{parentName:"p",href:"https://nats.io/"},"NATS")," to communicate with the ",(0,i.kt)("a",{parentName:"p",href:"#api-gateway"},"API Gateway"),"."),(0,i.kt)("p",null,"Event Sourcing was used instead of a traditional relational database because it was a better fit for the domain. This provided built-in support for auditing which allowed the goals service to easily provide an audit trail for goals. Event Sourcing also provided built-in support for querying which allowed the goals service to easily provide an activity history of goals."),(0,i.kt)("p",null,"The Goals Service is built using the following technologies:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nestjs.com/"},"NestJS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://eventstore.com/"},"Event Store")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nats.io/"},"NATS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://opentelemetry.io/"},"Open Telemetry"))),(0,i.kt)("p",null,"A detailed architecture diagram for the goals service can be found ",(0,i.kt)("a",{parentName:"p",href:"architecture/goals-service-architecture"},"here"),"."),(0,i.kt)("h3",{id:"oauth-agent-service"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/apps/services/oauth-agent-service"},"OAuth Agent Service")),(0,i.kt)("p",null,"The OAuth Agent Service is a ",(0,i.kt)("a",{parentName:"p",href:"https://nestjs.com/"},"NestJS")," application that is responsible for authenticating users using OAuth. The OAuth Agent Service uses ",(0,i.kt)("a",{parentName:"p",href:"#curity-identity-server"},"Curity Identity Server")," to authenticate users. The OAuth Agent Service uses ",(0,i.kt)("a",{parentName:"p",href:"https://nats.io/"},"NATS")," to communicate with the ",(0,i.kt)("a",{parentName:"p",href:"#api-gateway"},"API Gateway"),"."),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-ietf-oauth-browser-based-apps#name-token-mediating-backend"},"Token-Mediating Backend")," OAuth 2.0 pattern was used to provide a single point of authentication for the application. This is considered a best practice for browser-based applications as documented in ",(0,i.kt)("a",{parentName:"p",href:"https://datatracker.ietf.org/doc/html/draft-ietf-oauth-browser-based-apps"},"OAuth 2.0 for Browser-Based Apps"),"."),(0,i.kt)("p",null,"The OAuth Agent Service provides endpoints to authenticate users using OAuth, to exchange an authorization code for an access token, to exchange a refresh token for an access token. The OAuth Agent Service also provides endpoints to get the user's profile information and to get the user's email address."),(0,i.kt)("p",null,"The OAuth Agent Service is built using the following technologies:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nestjs.com/"},"NestJS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nats.io/"},"NATS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://opentelemetry.io/"},"Open Telemetry"))),(0,i.kt)("h3",{id:"users-service"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/apps/service/users-service"},"Users Service")),(0,i.kt)("p",null,"The Users Service is a ",(0,i.kt)("a",{parentName:"p",href:"https://nestjs.com/"},"NestJS")," application that is responsible for forwarding requests to the ",(0,i.kt)("a",{parentName:"p",href:"#curity-identity-server"},"Curity Identity Server"),". The Users Service uses ",(0,i.kt)("a",{parentName:"p",href:"https://nats.io/"},"NATS")," to communicate with the ",(0,i.kt)("a",{parentName:"p",href:"#api-gateway"},"API Gateway"),"."),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"#curity-identity-server"},"Curity Identity Server")," has users GraphQL endpoint that is used to manage users. The Users Service provides endpoints to get a single user, to get a list of users, to create a user, to update a user, and to delete a user."),(0,i.kt)("p",null,"The Users Service is built using the following technologies:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nestjs.com/"},"NestJS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://nats.io/"},"NATS")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://opentelemetry.io/"},"Open Telemetry")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://graphql.org/"},"GraphQL"))),(0,i.kt)("h3",{id:"curity-identity-server-3rd-party"},(0,i.kt)("a",{parentName:"h3",href:"https://curity.io/"},"Curity Identity Server")," (3rd Party)"),(0,i.kt)("p",null,"The Curity Identity Server is a self-hosted OAuth 2.0 and OpenID Connect 1.0 provider that is used to authenticate users."),(0,i.kt)("p",null,"The Curity Identity Server has 3 services:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://curity.io/product/authentication-service"},"Authentication Service")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://curity.io/product/token-service/"},"Token Service")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://curity.io/product/user-management-service/"},"User Management Service"))),(0,i.kt)("p",null,"The Authentication Service is used to authenticate users using OAuth 2.0 and OpenID Connect 1.0. The Token Service is used to issue access tokens and refresh tokens. The User Management Service is used to manage users."),(0,i.kt)("h2",{id:"libraries"},"Libraries"),(0,i.kt)("h3",{id:"common"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/libs/common"},"Common")),(0,i.kt)("p",null,"The Common library contains common code that is used by other libraries and services."),(0,i.kt)("h3",{id:"api-gateway-api-client"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/libs/shared-api-client-api-gateway"},"API Gateway API Client")),(0,i.kt)("p",null,"The API Gateway API Client library is an ",(0,i.kt)("a",{parentName:"p",href:"https://angular.io/"},"Angular")," library that is used to communicate with the ",(0,i.kt)("a",{parentName:"p",href:"#api-gateway"},"API Gateway"),". It is generated using ",(0,i.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/"},"OpenAPI Generator"),"."),(0,i.kt)("h3",{id:"oauth-agent-api-client"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/libs/shared-api-client-oauth-agent"},"OAuth Agent API Client")),(0,i.kt)("p",null,"The OAuth Agent API Client library is an ",(0,i.kt)("a",{parentName:"p",href:"https://angular.io/"},"Angular")," library that is used to communicate with the ",(0,i.kt)("a",{parentName:"p",href:"#oauth-agent-service"},"OAuth Agent Service"),". It is generated using ",(0,i.kt)("a",{parentName:"p",href:"https://openapi-generator.tech/"},"OpenAPI Generator"),"."),(0,i.kt)("h3",{id:"shared-goals"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/libs/shared-goals"},"Shared Goals")),(0,i.kt)("p",null,"The Shared Goals library is an ",(0,i.kt)("a",{parentName:"p",href:"https://angular.io/"},"Angular")," library that contains common code that is used by the ",(0,i.kt)("a",{parentName:"p",href:"#goals-service"},"Goals Service")," and the ",(0,i.kt)("a",{parentName:"p",href:"#ui"},"UI"),"."),(0,i.kt)("h3",{id:"ui"},(0,i.kt)("a",{parentName:"h3",href:"https://github.com/marleypowell/goalie/tree/main/libs/ui"},"UI")),(0,i.kt)("p",null,"The UI library is an ",(0,i.kt)("a",{parentName:"p",href:"https://angular.io/"},"Angular")," library with reusable UI components consumed by the ",(0,i.kt)("a",{parentName:"p",href:"#frontend"},"Frontend"),"."))}c.isMDXComponent=!0}}]);